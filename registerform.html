<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arulmigu Sri Arthanaareeswarar Temple - Marriage Registration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ====== GLOBAL STYLES ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --navi-blue: #000080;
            --light-navi: #4169E1;
            --sky-blue: #87CEEB;
            --soft-blue: #E6F0FF;
            --gold-accent: #FFD700;
            --silver-accent: #C0C0C0;
            --light-bg: #F5F8FF;
            --form-bg: #FFFFFF;
            --border-color: #B0C4DE;
            --text-dark: #1E2A4A;
            --text-light: #4A5A8C;
            --success: #2E8B57;
            --warning: #FF8C00;
            --payment-purple: #6A5ACD;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
            padding-bottom: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ====== HEADER ====== */
        .header {
            background: linear-gradient(135deg, var(--navi-blue), var(--light-navi));
            color: white;
            padding: 25px 0;
            border-bottom: 8px solid var(--gold-accent);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--gold-accent), var(--silver-accent), var(--gold-accent));
        }

        .temple-name-tamil {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            letter-spacing: 1px;
            color: var(--gold-accent);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .temple-name-english {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 600;
            color: white;
        }

        .temple-location {
            font-size: 1.3rem;
            color: var(--sky-blue);
            margin-bottom: 15px;
        }

        .portal-title {
            background-color: rgba(255, 215, 0, 0.15);
            border: 2px solid var(--gold-accent);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: inline-block;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        /* ====== FORM CONTAINER & TABS ====== */
        .form-container {
            background-color: var(--form-bg);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 8px 20px rgba(0, 33, 79, 0.1);
            border: 2px solid var(--border-color);
        }

        .form-tabs {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab-btn {
            padding: 15px 30px;
            background-color: #F0F5FF;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 150px;
            text-align: center;
        }

        .tab-btn:hover {
            background-color: #E6F0FF;
            color: var(--navi-blue);
        }

        .tab-btn.active {
            background-color: white;
            color: var(--navi-blue);
            border-bottom: 3px solid var(--navi-blue);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ====== FORM SECTIONS ====== */
        .form-section {
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 2px dashed var(--border-color);
        }

        .section-title {
            color: var(--navi-blue);
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--gold-accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--light-navi);
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            flex: 1;
            min-width: 250px;
        }

        .form-group-half {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .required::after {
            content: " *";
            color: var(--navi-blue);
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: #FFF;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--light-navi);
            box-shadow: 0 0 0 3px rgba(65, 105, 225, 0.1);
        }

        /* ====== UPLOAD SECTION ====== */
        .upload-section {
            background-color: var(--soft-blue);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            border: 2px dashed var(--border-color);
        }

        .upload-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .upload-item {
            text-align: center;
            padding: 20px;
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-item:hover {
            border-color: var(--navi-blue);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 33, 79, 0.1);
        }

        .upload-item i {
            font-size: 2.5rem;
            color: var(--light-navi);
            margin-bottom: 10px;
        }

        .upload-note {
            background-color: #FFF8E6;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        /* ====== WITNESS & ADDRESS ====== */
        .witness-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .witness-box {
            background-color: var(--soft-blue);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .address-section {
            background-color: var(--soft-blue);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .address-title {
            color: var(--navi-blue);
            font-size: 1.2rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--gold-accent);
        }

        /* ====== BUTTONS ====== */
        .btn-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-block;
            padding: 14px 30px;
            background: linear-gradient(to right, var(--navi-blue), var(--light-navi));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            text-decoration: none;
            box-shadow: 0 4px 8px rgba(0, 33, 79, 0.2);
            min-width: 200px;
        }

        .btn:hover {
            background: linear-gradient(to right, var(--light-navi), var(--navi-blue));
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 33, 79, 0.25);
        }

        .btn-gold {
            background: linear-gradient(to right, var(--gold-accent), #FFB300);
        }

        .btn-gold:hover {
            background: linear-gradient(to right, #FFB300, var(--gold-accent));
        }

        .btn-purple {
            background: linear-gradient(to right, var(--payment-purple), #9370DB);
        }

        .btn-purple:hover {
            background: linear-gradient(to right, #9370DB, var(--payment-purple));
        }

        /* ====== DECLARATION & PREVIEW ====== */
        .declaration-box {
            background-color: #E6F0FF;
            border-left: 5px solid var(--navi-blue);
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: normal;
            cursor: pointer;
        }

        input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .preview-container {
            background-color: var(--soft-blue);
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .preview-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #D1DCEB;
        }

        .preview-title {
            color: var(--navi-blue);
            font-size: 1.3rem;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--gold-accent);
        }

        .preview-row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }

        .preview-label {
            font-weight: 600;
            width: 200px;
            color: var(--text-dark);
        }

        .preview-value {
            flex: 1;
            color: var(--text-light);
        }

        .documents-summary {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .document-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #EEE;
        }

        .document-status {
            color: var(--success);
            font-weight: bold;
        }

        .document-status.pending {
            color: var(--warning);
        }

        /* ====== FOOTER ====== */
        .footer {
            background-color: #1E2A4A;
            color: white;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 5px solid var(--gold-accent);
            text-align: center;
        }

        .footer h3 {
            color: var(--gold-accent);
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .copyright {
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #2A3A5A;
            color: #B0C4DE;
            font-size: 0.9rem;
        }

        /* ====== RESPONSIVE ====== */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }

            .temple-name-tamil {
                font-size: 1.8rem;
            }

            .temple-name-english {
                font-size: 1.5rem;
            }

            .btn-container {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
            }

            .witness-container {
                grid-template-columns: 1fr;
            }

            .form-tabs {
                flex-direction: column;
            }

            .tab-btn {
                border-bottom: 1px solid var(--border-color);
            }
        }
    </style>
</head>

<body>
    <!-- Header Section -->
    <div class="header">
        <div class="container">
            <div class="temple-name-tamil">அருள்மிகு ஸ்ரீ அர்த்தநாரீஸ்வரர் திருக்கோவில்</div>
            <div class="temple-name-english">Arulmigu Sri Arthanaareeswarar Temple</div>
            <div class="temple-location">உலகியநல்லூர் | Ulagiyanallur</div>
            <div class="portal-title">
                <i class="fas fa-ring"></i> Marriage Registration Portal
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Form Tabs -->
        <div class="form-tabs">
            <button class="tab-btn active" onclick="openTab(event, 'bride-tab')">
                <i class="fas fa-female"></i> Bride Details
            </button>
            <button class="tab-btn" onclick="openTab(event, 'groom-tab')">
                <i class="fas fa-male"></i> Groom Details
            </button>
            <button class="tab-btn" onclick="openTab(event, 'parents-tab')">
                <i class="fas fa-users"></i> Parents Details
            </button>
            <button class="tab-btn" onclick="openTab(event, 'witness-tab')">
                <i class="fas fa-user-friends"></i> Witness & Documents
            </button>
            <button class="tab-btn" onclick="openTab(event, 'address-tab')">
                <i class="fas fa-home"></i> Address Details
            </button>
            <button class="tab-btn" id="preview-tab-btn">
                <i class="fas fa-eye"></i> Preview & Payment
            </button>
            <!-- Payment tab button is hidden - we will redirect directly -->
        </div>

        <!-- Main Form Container -->
        <div class="form-container">
            <!-- Bride Details Tab -->
            <div id="bride-tab" class="tab-content active">
                <h2 class="section-title"><i class="fas fa-female"></i> Bride Details</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-name" class="required">Full Name</label>
                        <input type="text" id="bride-name" placeholder="Enter bride's full name">
                    </div>
                    <div class="form-group">
                        <label for="bride-initial" class="required">Initial</label>
                        <input type="text" id="bride-initial" placeholder="E.g.: S., R., etc.">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-dob" class="required">Date of Birth</label>
                        <input type="date" id="bride-dob">
                    </div>
                    <div class="form-group">
                        <label for="bride-age" class="required">Age</label>
                        <input type="number" id="bride-age" placeholder="Age in years" min="18">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-email" class="required">Email</label>
                        <input type="email" id="bride-email" placeholder="Enter email address">
                    </div>
                    <div class="form-group">
                        <label for="bride-aadhar" class="required">Aadhar Number</label>
                        <input type="text" id="bride-aadhar" placeholder="12-digit Aadhar number">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-region" class="required">Region & State</label>
                        <input type="text" id="bride-region" placeholder="Region and State">
                    </div>
                    <div class="form-group">
                        <label for="bride-religion" class="required">Religion</label>
                        <select id="bride-religion">
                            <option value="">Select Religion</option>
                            <option value="hindu">Hindu</option>
                            <option value="muslim">Muslim</option>
                            <option value="christian">Christian</option>
                            <option value="sikh">Sikh</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-caste" class="required">Caste</label>
                        <input type="text" id="bride-caste" placeholder="Enter caste">
                    </div>
                    <div class="form-group">
                        <label for="bride-subcaste" class="required">Sub-caste</label>
                        <input type="text" id="bride-subcaste" placeholder="Enter sub-caste">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-education" class="required">Education</label>
                        <select id="bride-education">
                            <option value="">Select Education Level</option>
                            <option value="sslc">SSLC</option>
                            <option value="hsc">HSC</option>
                            <option value="diploma">Diploma</option>
                            <option value="ug">Undergraduate</option>
                            <option value="pg">Postgraduate</option>
                            <option value="doctorate">Doctorate</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bride-occupation" class="required">Phone Number</label>
                        <input type="text" id="bride-occupation" placeholder="Enter Phone Number">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bride-marital-status" class="required">Marital Status</label>
                        <select id="bride-marital-status">
                            <option value="">Select Marital Status</option>
                            <option value="never_married">Never Married</option>
                            <option value="separated">Separated</option>
                            <option value="divorced">Divorced</option>
                            <option value="widowed">Widowed</option>
                            <option value="annulled">Annulled</option>
                            <option value="remarried">Remarried</option>
                            <option value="living_together">Living Together</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="btn-container">
                    <button class="btn btn-gold" onclick="goToNextTab('groom-tab')">
                        Next: Groom Details <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Groom Details Tab -->
            <div id="groom-tab" class="tab-content">
                <h2 class="section-title"><i class="fas fa-male"></i> Groom Details</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-name" class="required">Full Name</label>
                        <input type="text" id="groom-name" placeholder="Enter groom's full name">
                    </div>
                    <div class="form-group">
                        <label for="groom-initial" class="required">Initial</label>
                        <input type="text" id="groom-initial" placeholder="E.g.: S., R., etc.">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-dob" class="required">Date of Birth</label>
                        <input type="date" id="groom-dob">
                    </div>
                    <div class="form-group">
                        <label for="groom-age" class="required">Age</label>
                        <input type="number" id="groom-age" placeholder="Age in years" min="21">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-email" class="required">Email</label>
                        <input type="email" id="groom-email" placeholder="Enter email address">
                    </div>
                    <div class="form-group">
                        <label for="groom-aadhar" class="required">Aadhar Number</label>
                        <input type="text" id="groom-aadhar" placeholder="12-digit Aadhar number">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-region" class="required">Region & State</label>
                        <input type="text" id="groom-region" placeholder="Region and State">
                    </div>
                    <div class="form-group">
                        <label for="groom-religion" class="required">Religion</label>
                        <select id="groom-religion">
                            <option value="">Select Religion</option>
                            <option value="hindu">Hindu</option>
                            <option value="muslim">Muslim</option>
                            <option value="christian">Christian</option>
                            <option value="sikh">Sikh</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-caste" class="required">Caste</label>
                        <input type="text" id="groom-caste" placeholder="Enter caste">
                    </div>
                    <div class="form-group">
                        <label for="groom-subcaste" class="required">Sub-caste</label>
                        <input type="text" id="groom-subcaste" placeholder="Enter sub-caste">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-education" class="required">Education</label>
                        <select id="groom-education">
                            <option value="">Select Education Level</option>
                            <option value="sslc">SSLC</option>
                            <option value="hsc">HSC</option>
                            <option value="diploma">Diploma</option>
                            <option value="ug">Undergraduate</option>
                            <option value="pg">Postgraduate</option>
                            <option value="doctorate">Doctorate</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="groom-occupation" class="required">Phone Number</label>
                        <input type="text" id="groom-occupation" placeholder="Enter Phone Number">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="groom-marital-status" class="required">Marital Status</label>
                        <select id="groom-marital-status">
                            <option value="">Select Marital Status</option>
                            <option value="never_married">Never Married</option>
                            <option value="separated">Separated</option>
                            <option value="divorced">Divorced</option>
                            <option value="widowed">Widowed</option>
                            <option value="annulled">Annulled</option>
                            <option value="remarried">Remarried</option>
                            <option value="living_together">Living Together</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="btn-container">
                    <button class="btn" onclick="goToNextTab('bride-tab')">
                        <i class="fas fa-arrow-left"></i> Previous: Bride Details
                    </button>
                    <button class="btn btn-gold" onclick="goToNextTab('parents-tab')">
                        Next: Parents Details <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Parents Details Tab -->
            <div id="parents-tab" class="tab-content">
                <h2 class="section-title"><i class="fas fa-users"></i> Parents Details</h2>
                <p style="margin-bottom: 20px; color: var(--text-light);">
                    Please provide details of both bride's and groom's parents
                </p>
                <!-- Bride's Parents -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-female"></i> Bride's Parents Details</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bride-parent-father-name" class="required">Father's Name</label>
                            <input type="text" id="bride-parent-father-name" placeholder="Father's full name">
                        </div>
                        <div class="form-group">
                            <label for="bride-parent-father-dob" class="required">Father's Date of Birth</label>
                            <input type="date" id="bride-parent-father-dob">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bride-parent-mother-name" class="required">Mother's Name</label>
                            <input type="text" id="bride-parent-mother-name" placeholder="Mother's full name">
                        </div>
                        <div class="form-group">
                            <label for="bride-parent-mother-dob" class="required">Mother's Date of Birth</label>
                            <input type="date" id="bride-parent-mother-dob">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bride-parent-father-aadhar" class="required">Father's Aadhar Number</label>
                            <input type="text" id="bride-parent-father-aadhar" placeholder="12-digit Aadhar number">
                        </div>
                        <div class="form-group">
                            <label for="bride-parent-mother-aadhar" class="required">Mother's Aadhar Number</label>
                            <input type="text" id="bride-parent-mother-aadhar" placeholder="12-digit Aadhar number">
                        </div>
                    </div>
                </div>
                <!-- Groom's Parents -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-male"></i> Groom's Parents Details</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="groom-parent-father-name" class="required">Father's Name</label>
                            <input type="text" id="groom-parent-father-name" placeholder="Father's full name">
                        </div>
                        <div class="form-group">
                            <label for="groom-parent-father-dob" class="required">Father's Date of Birth</label>
                            <input type="date" id="groom-parent-father-dob">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="groom-parent-mother-name" class="required">Mother's Name</label>
                            <input type="text" id="groom-parent-mother-name" placeholder="Mother's full name">
                        </div>
                        <div class="form-group">
                            <label for="groom-parent-mother-dob" class="required">Mother's Date of Birth</label>
                            <input type="date" id="groom-parent-mother-dob">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="groom-parent-father-aadhar" class="required">Father's Aadhar Number</label>
                            <input type="text" id="groom-parent-father-aadhar" placeholder="12-digit Aadhar number">
                        </div>
                        <div class="form-group">
                            <label for="groom-parent-mother-aadhar" class="required">Mother's Aadhar Number</label>
                            <input type="text" id="groom-parent-mother-aadhar" placeholder="12-digit Aadhar number">
                        </div>
                    </div>
                </div>
                <div class="btn-container">
                    <button class="btn" onclick="goToNextTab('groom-tab')">
                        <i class="fas fa-arrow-left"></i> Previous: Groom Details
                    </button>
                    <button class="btn btn-gold" onclick="goToNextTab('witness-tab')">
                        Next: Witness & Documents <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Witness & Documents Tab -->
            <!-- Witness & Documents Tab -->
            <div id="witness-tab" class="tab-content">
                <h2 class="section-title"><i class="fas fa-user-friends"></i> Witness Details & Document Upload</h2>

                <!-- Photo Upload Section -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-camera"></i> Photo Uploads (Required)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bride-photo" class="required">Bride's Photo</label>
                            <input type="file" id="bride-photo" accept="image/*">
                        </div>
                        <div class="form-group">
                            <label for="groom-photo" class="required">Groom's Photo</label>
                            <input type="file" id="groom-photo" accept="image/*">
                        </div>
                    </div>
                </div>

                <div class="witness-container">
                    <div class="witness-box">
                        <h3 class="witness-title">Witness for Bride</h3>
                        <div class="form-group">
                            <label for="bride-witness-relation" class="required">Relation to Bride</label>
                            <input type="text" id="bride-witness-relation" placeholder="E.g.: Father, Brother, Friend">
                        </div>
                        <div class="form-group">
                            <label for="bride-witness-name" class="required">Witness Name</label>
                            <input type="text" id="bride-witness-name" placeholder="Full name of witness">
                        </div>
                        <div class="form-group">
                            <label for="bride-witness-address" class="required">Address</label>
                            <textarea id="bride-witness-address" rows="3"
                                placeholder="Complete address of witness"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="bride-witness-aadhar" class="required">Aadhar Number</label>
                            <input type="text" id="bride-witness-aadhar" placeholder="12-digit Aadhar number">
                        </div>
                    </div>
                    <div class="witness-box">
                        <h3 class="witness-title">Witness for Groom</h3>
                        <div class="form-group">
                            <label for="groom-witness-relation" class="required">Relation to Groom</label>
                            <input type="text" id="groom-witness-relation" placeholder="E.g.: Father, Brother, Friend">
                        </div>
                        <div class="form-group">
                            <label for="groom-witness-name" class="required">Witness Name</label>
                            <input type="text" id="groom-witness-name" placeholder="Full name of witness">
                        </div>
                        <div class="form-group">
                            <label for="groom-witness-address" class="required">Address</label>
                            <textarea id="groom-witness-address" rows="3"
                                placeholder="Complete address of witness"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="groom-witness-aadhar" class="required">Aadhar Number</label>
                            <input type="text" id="groom-witness-aadhar" placeholder="12-digit Aadhar number">
                        </div>
                    </div>
                    <div class="witness-box">
                        <h3 class="witness-title">Marriage Details</h3>
                        <div class="form-group">
                            <label for="reception-place" class="required">Reception Place</label>
                            <input type="text" id="reception-place" placeholder="Enter reception venue">
                        </div>
                        <div class="form-group">
                            <label for="reception-date" class="required">Reception Date</label>
                            <input type="date" id="reception-date">
                        </div>
                        <div class="form-group">
                            <label for="marriage-date" class="required">Marriage Date</label>
                            <input type="date" id="marriage-date">
                        </div>
                        <div class="form-group">
                            <label for="marriage-time" class="required">Marriage Time</label>
                            <input type="time" id="marriage-time">
                        </div>
                    </div>
                </div>

                <!-- Document Upload -->
                <div class="upload-section">
                    <h3 class="section-title"><i class="fas fa-upload"></i> Document Upload</h3>
                    <div class="upload-note">
                        <h4><i class="fas fa-info-circle"></i> Important Guidelines</h4>
                        <ul>
                            <li>All documents must be clear, legible and in <strong>JPEG, PNG or PDF format</strong>
                            </li>
                            <li>Maximum file size: <strong>2 MB per document</strong></li>
                            <li>Ensure all text in documents is clearly readable</li>
                        </ul>
                    </div>
                    <div class="upload-grid">
                        <div class="upload-item" onclick="triggerUpload('bride-photo')">
                            <i class="fas fa-camera"></i>
                            <span>Bride's Photo</span>
                            <p>Recent passport size</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('groom-photo')">
                            <i class="fas fa-camera"></i>
                            <span>Groom's Photo</span>
                            <p>Recent passport size</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('bride-aadhar-card')">
                            <i class="fas fa-id-card"></i>
                            <span>Bride's Aadhar Card</span>
                            <p>Front and back</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('groom-aadhar-card')">
                            <i class="fas fa-id-card"></i>
                            <span>Groom's Aadhar Card</span>
                            <p>Front and back</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('family-smart-card')">
                            <i class="fas fa-address-card"></i>
                            <span>Family Smart Card</span>
                            <p>For bride and groom</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('parent-aadhar')">
                            <i class="fas fa-user-friends"></i>
                            <span>Parent Aadhar (Any One)</span>
                            <p>Father or mother</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('community-certificate')">
                            <i class="fas fa-file-alt"></i>
                            <span>Community Certificate</span>
                            <p>Caste certificate</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('birth-certificate')">
                            <i class="fas fa-certificate"></i>
                            <span>Birth Certificate / Marksheet</span>
                            <p>For age proof</p>
                        </div>
                        <div class="upload-item" onclick="triggerUpload('marriage-invitation')">
                            <i class="fas fa-envelope-open-text"></i>
                            <span>Marriage Invitation</span>
                            <p>Date verification</p>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <input type="file" id="file-upload" style="display: none;" onchange="handleFileUpload()">
                        <p id="upload-status" style="color: var(--success); font-weight: 600;"></p>
                    </div>
                </div>
                <div class="btn-container">
                    <button class="btn" onclick="goToNextTab('parents-tab')">
                        <i class="fas fa-arrow-left"></i> Previous: Parents Details
                    </button>
                    <button class="btn btn-gold" onclick="goToNextTab('address-tab')">
                        Next: Address Details <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Address Details Tab -->
            <div id="address-tab" class="tab-content">
                <h2 class="section-title"><i class="fas fa-home"></i> Address Details</h2>
                <!-- Bride's Address -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-female"></i> Bride's Address</h3>
                    <div class="address-section">
                        <h4 class="address-title">Permanent Address</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bride-permanent-door" class="required">Door/Flat No, Street,
                                    Landmark</label>
                                <input type="text" id="bride-permanent-door" placeholder="Complete address details">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="bride-permanent-city" class="required">City/Village Name</label>
                                <input type="text" id="bride-permanent-city" placeholder="City or village">
                            </div>
                            <div class="form-group-half">
                                <label for="bride-permanent-taluk" class="required">Taluk Name</label>
                                <input type="text" id="bride-permanent-taluk" placeholder="Taluk name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="bride-permanent-district" class="required">District Name</label>
                                <input type="text" id="bride-permanent-district" placeholder="District">
                            </div>
                            <div class="form-group-half">
                                <label for="bride-permanent-state" class="required">State</label>
                                <input type="text" id="bride-permanent-state" placeholder="State">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="bride-permanent-pincode" class="required">PIN Code</label>
                                <input type="text" id="bride-permanent-pincode" placeholder="6-digit PIN code">
                            </div>
                        </div>
                    </div>
                    <div class="address-section" style="margin-top: 30px;">
                        <h4 class="address-title">Temporary Address (if different)
                            <div class="form-group-half">
                                <label>
                                    <input type="checkbox" id="bride-same-address"> Same as permanent address
                                </label>
                            </div>
                        </h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bride-temp-door">Door/Flat No, Street, Landmark</label>
                                <input type="text" id="bride-temp-door" placeholder="Complete address details">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="bride-temp-city">City/Village Name</label>
                                <input type="text" id="bride-temp-city" placeholder="City or village">
                            </div>
                            <div class="form-group-half">
                                <label for="bride-temp-taluk">Taluk Name</label>
                                <input type="text" id="bride-temp-taluk" placeholder="Taluk name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="bride-temp-district">District Name</label>
                                <input type="text" id="bride-temp-district" placeholder="District">
                            </div>
                            <div class="form-group-half">
                                <label for="bride-temp-state">State</label>
                                <input type="text" id="bride-temp-state" placeholder="State">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="bride-temp-pincode">PIN Code</label>
                                <input type="text" id="bride-temp-pincode" placeholder="6-digit PIN code">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Groom's Address -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-male"></i> Groom's Address</h3>
                    <div class="address-section">
                        <h4 class="address-title">Permanent Address</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="groom-permanent-door" class="required">Door/Flat No, Street,
                                    Landmark</label>
                                <input type="text" id="groom-permanent-door" placeholder="Complete address details">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="groom-permanent-city" class="required">City/Village Name</label>
                                <input type="text" id="groom-permanent-city" placeholder="City or village">
                            </div>
                            <div class="form-group-half">
                                <label for="groom-permanent-taluk" class="required">Taluk Name</label>
                                <input type="text" id="groom-permanent-taluk" placeholder="Taluk name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="groom-permanent-district" class="required">District Name</label>
                                <input type="text" id="groom-permanent-district" placeholder="District">
                            </div>
                            <div class="form-group-half">
                                <label for="groom-permanent-state" class="required">State</label>
                                <input type="text" id="groom-permanent-state" placeholder="State">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="groom-permanent-pincode" class="required">PIN Code</label>
                                <input type="text" id="groom-permanent-pincode" placeholder="6-digit PIN code">
                            </div>
                        </div>
                    </div>
                    <div class="address-section" style="margin-top: 30px;">
                        <h4 class="address-title">Temporary Address (if different)
                            <div class="form-group-half">
                                <label>
                                    <input type="checkbox" id="groom-same-address"> Same as permanent address
                                </label>
                            </div>
                        </h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="groom-temp-door">Door/Flat No, Street, Landmark</label>
                                <input type="text" id="groom-temp-door" placeholder="Complete address details">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="groom-temp-city">City/Village Name</label>
                                <input type="text" id="groom-temp-city" placeholder="City or village">
                            </div>
                            <div class="form-group-half">
                                <label for="groom-temp-taluk">Taluk Name</label>
                                <input type="text" id="groom-temp-taluk" placeholder="Taluk name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="groom-temp-district">District Name</label>
                                <input type="text" id="groom-temp-district" placeholder="District">
                            </div>
                            <div class="form-group-half">
                                <label for="groom-temp-state">State</label>
                                <input type="text" id="groom-temp-state" placeholder="State">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group-half">
                                <label for="groom-temp-pincode">PIN Code</label>
                                <input type="text" id="groom-temp-pincode" placeholder="6-digit PIN code">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Declaration -->
                <div class="declaration-box">
                    <h3 class="declaration-title"><i class="fas fa-file-signature"></i> Declaration</h3>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="declaration-1" required><span>I hereby declare that all
                                information provided is true and correct.</span></label>
                    </div>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="declaration-2" required><span>I agree that I meet all
                                eligibility criteria for marriage registration.</span></label>
                    </div>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="declaration-3" required><span>I understand that providing
                                false information is punishable under Indian Penal Code.</span></label>
                    </div>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="declaration-4" required><span>I have read and understood all
                                the terms and conditions.</span></label>
                    </div>
                </div>

                <div class="btn-container">
                    <button class="btn" onclick="goToNextTab('witness-tab')">
                        <i class="fas fa-arrow-left"></i> Previous: Witness & Documents
                    </button>
                    <button class="btn btn-gold" onclick="validateFormAndShowPreview()">
                        Preview & Continue <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Preview Tab -->
            <div id="preview-tab" class="tab-content">
                <h2 class="section-title"><i class="fas fa-eye"></i> Preview & Continue to Payment</h2>
                <p style="margin-bottom: 20px; color: var(--text-light);">
                    Please review all the information below before proceeding to payment
                </p>
                <div class="preview-container" id="preview-content">
                    <p>Preview will be generated after form validation...</p>
                </div>
                <div class="btn-container" id="preview-buttons">
                    <button class="btn" onclick="goToNextTab('address-tab')">
                        <i class="fas fa-edit"></i> Edit Information
                    </button>
                    <!-- REDIRECT TO RAZORPAY.HTML BUTTON -->
                    <button class="btn btn-purple" onclick="redirectToRazorpay()">
                        <i class="fas fa-credit-card"></i> Proceed to Payment (Razorpay)
                    </button>
                </div>
            </div>

        </div> <!-- end form-container -->
    </div> <!-- end container -->

    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <div class="footer-content">
                <h3>Arulmigu Sri Arthanaareeswarar Temple, Ulagiyanallur</h3>
                <p>Marriage Registration Portal</p>
                <div class="copyright">
                    <p>© 2023 Arulmigu Sri Arthanaareeswarar Temple. All rights reserved.</p>
                    <p>This registration form follows all legal requirements of Tamil Nadu Marriage Registration Act.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        let uploadedDocuments = {};
        let currentUploadType = '';

        // ========== TAB NAVIGATION ==========
        function openTab(evt, tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }
            const tabButtons = document.getElementsByClassName("tab-btn");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            if (evt && evt.currentTarget) {
                evt.currentTarget.classList.add("active");
            }
        }

        function goToNextTab(tabName) {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }
            const tabButtons = document.getElementsByClassName("tab-btn");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");

            const buttonMap = {
                'bride-tab': document.querySelectorAll('.tab-btn')[0],
                'groom-tab': document.querySelectorAll('.tab-btn')[1],
                'parents-tab': document.querySelectorAll('.tab-btn')[2],
                'witness-tab': document.querySelectorAll('.tab-btn')[3],
                'address-tab': document.querySelectorAll('.tab-btn')[4],
                'preview-tab': document.querySelectorAll('.tab-btn')[5],
            };
            if (buttonMap[tabName]) {
                buttonMap[tabName].classList.add("active");
            }
            document.querySelector('.form-container').scrollIntoView({ behavior: 'smooth' });
        }

        // ========== AGE CALCULATION ==========
        function calculateAge(dateId, ageId) {
            const dobInput = document.getElementById(dateId);
            const ageInput = document.getElementById(ageId);
            if (dobInput && ageInput) {
                dobInput.addEventListener('change', function () {
                    const dob = new Date(this.value);
                    const today = new Date();
                    let age = today.getFullYear() - dob.getFullYear();
                    const monthDiff = today.getMonth() - dob.getMonth();
                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                        age--;
                    }
                    ageInput.value = age;
                });
            }
        }

        // ========== DOCUMENT UPLOAD ==========
        function triggerUpload(uploadType) {
            currentUploadType = uploadType;
            document.getElementById('file-upload').click();
        }

        function handleFileUpload() {
            const fileInput = document.getElementById('file-upload');
            const statusElement = document.getElementById('upload-status');
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                const fileSizeMB = file.size / (1024 * 1024);
                if (fileSizeMB > 2) {
                    statusElement.textContent = 'File size must be less than 2MB';
                    statusElement.style.color = 'red';
                    return;
                }
                const validTypes = ['image/jpeg', 'image/png', 'application/pdf'];
                if (!validTypes.includes(file.type)) {
                    statusElement.textContent = 'Only JPEG, PNG, and PDF files are allowed';
                    statusElement.style.color = 'red';
                    return;
                }
                statusElement.textContent = `File "${file.name}" uploaded successfully for ${currentUploadType.replace('-', ' ')}`;
                statusElement.style.color = 'var(--success)';
                uploadedDocuments[currentUploadType] = {
                    name: file.name,
                    size: (file.size / 1024).toFixed(2) + ' KB',
                    type: file.type,
                    uploaded: new Date().toLocaleString()
                };
                fileInput.value = '';
            }
        }

        // ========== SAME ADDRESS FUNCTIONALITY ==========
        function setupSameAddress() {
            const brideSame = document.getElementById('bride-same-address');
            if (brideSame) {
                brideSame.addEventListener('change', function () {
                    const tempFields = ['bride-temp-door', 'bride-temp-city', 'bride-temp-taluk', 'bride-temp-district', 'bride-temp-state', 'bride-temp-pincode'];
                    tempFields.forEach(id => {
                        const field = document.getElementById(id);
                        if (field) {
                            if (this.checked) {
                                const permId = id.replace('temp', 'permanent');
                                const permField = document.getElementById(permId);
                                if (permField) field.value = permField.value;
                                field.disabled = true;
                            } else {
                                field.disabled = false;
                            }
                        }
                    });
                });
            }
            const groomSame = document.getElementById('groom-same-address');
            if (groomSame) {
                groomSame.addEventListener('change', function () {
                    const tempFields = ['groom-temp-door', 'groom-temp-city', 'groom-temp-taluk', 'groom-temp-district', 'groom-temp-state', 'groom-temp-pincode'];
                    tempFields.forEach(id => {
                        const field = document.getElementById(id);
                        if (field) {
                            if (this.checked) {
                                const permId = id.replace('temp', 'permanent');
                                const permField = document.getElementById(permId);
                                if (permField) field.value = permField.value;
                                field.disabled = true;
                            } else {
                                field.disabled = false;
                            }
                        }
                    });
                });
            }
        }

        // ========== FORM VALIDATION & PREVIEW ==========
        function validateFormAndShowPreview() {
            const requiredFields = document.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = 'red';
                } else {
                    field.style.borderColor = '';
                }
            });
            const checkboxes = document.querySelectorAll('input[type="checkbox"][required]');
            checkboxes.forEach(checkbox => {
                if (!checkbox.checked) {
                    isValid = false;
                    checkbox.parentElement.style.color = 'red';
                } else {
                    checkbox.parentElement.style.color = '';
                }
            });
            const brideAge = parseInt(document.getElementById('bride-age')?.value) || 0;
            const groomAge = parseInt(document.getElementById('groom-age')?.value) || 0;
            if (brideAge < 18) { alert('Bride must be at least 18 years old.'); isValid = false; }
            if (groomAge < 21) { alert('Groom must be at least 21 years old.'); isValid = false; }
            if (!isValid) {
                alert('Please fill all required fields correctly before preview.');
                return;
            }
            generatePreview();
            goToNextTab('preview-tab');
        }

        function generatePreview() {
            const previewContent = document.getElementById('preview-content');
            const getValue = (id) => document.getElementById(id) ? document.getElementById(id).value || 'Not provided' : 'Not provided';

            let html = `<div class="preview-section">
                <h3 class="preview-title"><i class="fas fa-female"></i> Bride Details</h3>
                <div class="preview-row"><span class="preview-label">Full Name:</span><span class="preview-value">${getValue('bride-name')} ${getValue('bride-initial')}</span></div>
                <div class="preview-row"><span class="preview-label">DOB/Age:</span><span class="preview-value">${getValue('bride-dob')} (Age: ${getValue('bride-age')})</span></div>
                <div class="preview-row"><span class="preview-label">Aadhar:</span><span class="preview-value">${getValue('bride-aadhar')}</span></div>
                <div class="preview-row"><span class="preview-label">Religion/Caste:</span><span class="preview-value">${getValue('bride-religion')}, ${getValue('bride-caste')} (${getValue('bride-subcaste')})</span></div>
                <div class="preview-row"><span class="preview-label">Education/Phone:</span><span class="preview-value">${getValue('bride-education')}, ${getValue('bride-occupation')}</span></div>
                <div class="preview-row"><span class="preview-label">Marital Status:</span><span class="preview-value">${getValue('bride-marital-status')}</span></div>
            </div>`;
            html += `<div class="preview-section">
                <h3 class="preview-title"><i class="fas fa-male"></i> Groom Details</h3>
                <div class="preview-row"><span class="preview-label">Full Name:</span><span class="preview-value">${getValue('groom-name')} ${getValue('groom-initial')}</span></div>
                <div class="preview-row"><span class="preview-label">DOB/Age:</span><span class="preview-value">${getValue('groom-dob')} (Age: ${getValue('groom-age')})</span></div>
                <div class="preview-row"><span class="preview-label">Aadhar:</span><span class="preview-value">${getValue('groom-aadhar')}</span></div>
                <div class="preview-row"><span class="preview-label">Religion/Caste:</span><span class="preview-value">${getValue('groom-religion')}, ${getValue('groom-caste')} (${getValue('groom-subcaste')})</span></div>
                <div class="preview-row"><span class="preview-label">Education/Phone:</span><span class="preview-value">${getValue('groom-education')}, ${getValue('groom-occupation')}</span></div>
                <div class="preview-row"><span class="preview-label">Marital Status:</span><span class="preview-value">${getValue('groom-marital-status')}</span></div>
            </div>`;
            html += `<div class="preview-section">
                <h3 class="preview-title"><i class="fas fa-users"></i> Parents</h3>
                <div class="preview-row"><span class="preview-label">Bride's Father:</span><span class="preview-value">${getValue('bride-parent-father-name')}</span></div>
                <div class="preview-row"><span class="preview-label">Bride's Mother:</span><span class="preview-value">${getValue('bride-parent-mother-name')}</span></div>
                <div class="preview-row"><span class="preview-label">Groom's Father:</span><span class="preview-value">${getValue('groom-parent-father-name')}</span></div>
                <div class="preview-row"><span class="preview-label">Groom's Mother:</span><span class="preview-value">${getValue('groom-parent-mother-name')}</span></div>
            </div>`;
            html += `<div class="preview-section">
                <h3 class="preview-title"><i class="fas fa-user-friends"></i> Witness</h3>
                <div class="preview-row"><span class="preview-label">Bride's Witness:</span><span class="preview-value">${getValue('bride-witness-name')} (${getValue('bride-witness-relation')})</span></div>
                <div class="preview-row"><span class="preview-label">Groom's Witness:</span><span class="preview-value">${getValue('groom-witness-name')} (${getValue('groom-witness-relation')})</span></div>
                <div class="preview-row"><span class="preview-label">Marriage Date/Venue:</span><span class="preview-value">${getValue('marriage-date')} at ${getValue('reception-place')}</span></div>
            </div>`;
            html += `<div class="preview-section">
                <h3 class="preview-title"><i class="fas fa-home"></i> Address</h3>
                <div class="preview-row"><span class="preview-label">Bride's Address:</span><span class="preview-value">${getValue('bride-permanent-door')}, ${getValue('bride-permanent-city')}, ${getValue('bride-permanent-pincode')}</span></div>
                <div class="preview-row"><span class="preview-label">Groom's Address:</span><span class="preview-value">${getValue('groom-permanent-door')}, ${getValue('groom-permanent-city')}, ${getValue('groom-permanent-pincode')}</span></div>
            </div>`;
            html += `<div class="preview-section"><h3 class="preview-title"><i class="fas fa-file-alt"></i> Documents</h3><div class="documents-summary">`;
            const docs = [
                'bride-photo', 'groom-photo', 'bride-aadhar-card', 'groom-aadhar-card',
                'family-smart-card', 'parent-aadhar', 'community-certificate', 'birth-certificate'
            ];
            docs.forEach(d => {
                const status = uploadedDocuments[d] ? 'Uploaded' : 'Pending';
                html += `<div class="document-item"><span>${d.replace(/-/g, ' ')}</span><span class="document-status ${status === 'Pending' ? 'pending' : ''}">${status}</span></div>`;
            });
            html += `</div></div>`;
            previewContent.innerHTML = html;
        }

        // ========== BACKEND SUBMISSION & REDIRECT ==========
        const API_BASE_URL = 'http://localhost:8080/api';

        // Helper to convert file to Base64 with compression
        const fileToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = (event) => {
                    const img = new Image();
                    img.src = event.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        // Reduced to 400px (Passport size is small) to guarantee < 1MB payload
                        const MAX_WIDTH = 400;
                        const MAX_HEIGHT = 400;
                        let width = img.width;
                        let height = img.height;

                        if (width > height) {
                            if (width > MAX_WIDTH) {
                                height *= MAX_WIDTH / width;
                                width = MAX_WIDTH;
                            }
                        } else {
                            if (height > MAX_HEIGHT) {
                                width *= MAX_HEIGHT / height;
                                height = MAX_HEIGHT;
                            }
                        }

                        canvas.width = width;
                        canvas.height = height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);

                        // Compress to JPEG with 0.5 quality (High compression)
                        const dataUrl = canvas.toDataURL('image/jpeg', 0.5);
                        resolve(dataUrl);
                    };
                    img.onerror = error => reject(error);
                };
                reader.onerror = error => reject(error);
            });
        };

        async function submitRegistration() {
            // Show loading state
            const btn = document.querySelector('.btn-gold[onclick="redirectToRazorpay()"]');
            if (btn) {
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                btn.disabled = true;
            }

            try {
                const getValue = (id) => document.getElementById(id) ? document.getElementById(id).value : '';

                // Handle photos
                let bridePhotoBase64 = null;
                let groomPhotoBase64 = null;

                const bridePhotoInput = document.getElementById('bride-photo');
                if (bridePhotoInput && bridePhotoInput.files.length > 0) {
                    bridePhotoBase64 = await fileToBase64(bridePhotoInput.files[0]);
                } else {
                    alert('Please select a photo for the Bride!');
                    if (btn) btn.disabled = false;
                    return; // Stop submission
                }

                const groomPhotoInput = document.getElementById('groom-photo');
                if (groomPhotoInput && groomPhotoInput.files.length > 0) {
                    groomPhotoBase64 = await fileToBase64(groomPhotoInput.files[0]);
                } else {
                    alert('Please select a photo for the Groom!');
                    if (btn) btn.disabled = false;
                    return; // Stop submission
                }

                const userStr = localStorage.getItem('user');
                const user = userStr ? JSON.parse(userStr) : {};
                const applicationNumber = user.applicationNumber || '';

                const formData = {
                    applicationNumber: applicationNumber,
                    // Bride Details
                    brideName: getValue('bride-name'),
                    brideInitial: getValue('bride-initial'),
                    brideDob: getValue('bride-dob'),
                    brideAge: parseInt(getValue('bride-age')) || 0,
                    brideEmail: getValue('bride-email'),
                    brideAadhar: getValue('bride-aadhar'),
                    brideRegion: getValue('bride-region'),
                    brideReligion: getValue('bride-religion'),
                    brideCaste: getValue('bride-caste'),
                    brideSubcaste: getValue('bride-subcaste'),
                    brideEducation: getValue('bride-education'),
                    bridePhone: getValue('bride-occupation'),
                    brideMaritalStatus: getValue('bride-marital-status'),
                    bridePhoto: bridePhotoBase64, // Add photo

                    // Groom Details
                    groomName: getValue('groom-name'),
                    groomInitial: getValue('groom-initial'),
                    groomDob: getValue('groom-dob'),
                    groomAge: parseInt(getValue('groom-age')) || 0,
                    groomEmail: getValue('groom-email'),
                    groomAadhar: getValue('groom-aadhar'),
                    groomRegion: getValue('groom-region'),
                    groomReligion: getValue('groom-religion'),
                    groomCaste: getValue('groom-caste'),
                    groomSubcaste: getValue('groom-subcaste'),
                    groomEducation: getValue('groom-education'),
                    groomPhone: getValue('groom-occupation'),
                    groomMaritalStatus: getValue('groom-marital-status'),
                    groomPhoto: groomPhotoBase64, // Add photo

                    // Parents Details
                    brideFatherName: getValue('bride-parent-father-name'),
                    brideFatherDob: getValue('bride-parent-father-dob'),
                    brideFatherAadhar: getValue('bride-parent-father-aadhar'),
                    brideMotherName: getValue('bride-parent-mother-name'),
                    brideMotherDob: getValue('bride-parent-mother-dob'),
                    brideMotherAadhar: getValue('bride-parent-mother-aadhar'),

                    groomFatherName: getValue('groom-parent-father-name'),
                    groomFatherDob: getValue('groom-parent-father-dob'),
                    groomFatherAadhar: getValue('groom-parent-father-aadhar'),
                    groomMotherName: getValue('groom-parent-mother-name'),
                    groomMotherDob: getValue('groom-parent-mother-dob'),
                    groomMotherAadhar: getValue('groom-parent-mother-aadhar'),

                    // Witness Details
                    brideWitnessRelation: getValue('bride-witness-relation'),
                    brideWitnessName: getValue('bride-witness-name'),
                    brideWitnessAddress: getValue('bride-witness-address'),
                    brideWitnessAadhar: getValue('bride-witness-aadhar'),

                    groomWitnessRelation: getValue('groom-witness-relation'),
                    groomWitnessName: getValue('groom-witness-name'),
                    groomWitnessAddress: getValue('groom-witness-address'),
                    groomWitnessAadhar: getValue('groom-witness-aadhar'),

                    // Marriage Details
                    receptionPlace: getValue('reception-place'),
                    receptionDate: getValue('reception-date'),
                    marriageDate: getValue('marriage-date'),
                    marriageTime: getValue('marriage-time'),

                    // Address Details
                    bridePermanentAddress: `${getValue('bride-permanent-door')}, ${getValue('bride-permanent-city')}, ${getValue('bride-permanent-pincode')}`,
                    groomPermanentAddress: `${getValue('groom-permanent-door')}, ${getValue('groom-permanent-city')}, ${getValue('groom-permanent-pincode')}`
                };


                const response = await fetch(`${API_BASE_URL}/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                if (data.success) {
                    // Redirect to payment page with registration ID
                    window.location.href = `razorpay.html?id=${data.id}&amount=500`;
                } else {
                    alert('Failed to submit registration: ' + data.message);
                    if (btn) {
                        btn.innerHTML = 'Proceed to Payment (Razorpay) <i class="fas fa-arrow-right"></i>';
                        btn.disabled = false;
                    }
                }
            } catch (error) {
                console.error('Error submitting form:', error);
                alert('An error occurred. Please try again.');
                if (btn) {
                    btn.innerHTML = 'Proceed to Payment (Razorpay) <i class="fas fa-arrow-right"></i>';
                    btn.disabled = false;
                }
            }
        }

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function () {
            calculateAge('bride-dob', 'bride-age');
            calculateAge('groom-dob', 'groom-age');

            const today = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="date"]').forEach(input => {
                input.setAttribute('max', today);
            });

            setupSameAddress();

            // Attach event listener to the Proceed button if it exists or override the validtion function
            // We replaced 'redirectToRazorpay' but we need to ensure the HTML calls 'submitRegistration'
            // Since the HTML calls 'redirectToRazorpay()', we can aliasing it:
            window.redirectToRazorpay = submitRegistration;
        });

        // ========== HELPER FUNCTIONS (CLEANUP) ==========
    </script>
</body>

</html>